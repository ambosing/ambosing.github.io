{"componentChunkName":"component---src-templates-post-template-tsx","path":"/java/datarace/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>오늘은 강의를 듣고 있다가 Data Race라는 용어를 처음들어봐서 이렇게 정리하게 되었습니다.<br>\n멀티스레딩 환경에서 발생하는 문제입니다.<br>\n일단 이 글에서는 JAVA 기준으로 설명되어 있습니다. :)</p>\n<h2 id=\"멀티스레딩-환경에서의-공유자원\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%94%A9-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EA%B3%B5%EC%9C%A0%EC%9E%90%EC%9B%90\" aria-label=\"멀티스레딩 환경에서의 공유자원 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티스레딩 환경에서의 공유자원</h2>\n<p>Data Race를 이해하기 위해서는 먼저 멀티스레딩 환경에서 어떤 부분을 공유하고 있는지를 알고 있어야 합니다.<br>\n일단 메모리에 있는 Heap영역에 할당된 자원들은 모두 멀티스레딩 환경에서 공유되어집니다.</p>\n<ul>\n<li>객체들</li>\n<li>Class 멤버 변수</li>\n<li>Static 변수</li>\n</ul>\n<p>위와 같은 요소들이 공유자원이 됩니다.</p>\n<h2 id=\"비순차적-명령어-처리\" style=\"position:relative;\"><a href=\"#%EB%B9%84%EC%88%9C%EC%B0%A8%EC%A0%81-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%B2%98%EB%A6%AC\" aria-label=\"비순차적 명령어 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>비순차적 명령어 처리</h2>\n<p>비순차적 명령어 처리가 Data Race에 원인이 되므로 이것도 먼저 알아봅시다.</p>\n<p>먼저 비순차적 명령어 처리는 명령어 파이프라인에서 발생하므로 명령어 파이프라인부터 알아봅시다.</p>\n<p>CPU는 병렬적으로 명령어를 실행하는 명령어 파이프라인을 사용합니다.\n명령어 파이프라인을 사용하지 않았을 때 아래와 같이 실행시간이 매우 길어지기 때문입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/83de5a7b5566dbe7195a98d7b25825cd/74e18/2023-11-09-11-21-59.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.166666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRkoAAABXRUJQVlA4ID4AAADwAgCdASoUAAYAPtFUo0uoJKMhsAgBABoJaQAAetCIAAD+8X2J3AkwyGlqA9lTjaySjjp87sqSWmMzQEAAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/83de5a7b5566dbe7195a98d7b25825cd/a59e9/2023-11-09-11-21-59.webp 192w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/0ca9f/2023-11-09-11-21-59.webp 384w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/dc9b9/2023-11-09-11-21-59.webp 768w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/74e18/2023-11-09-11-21-59.webp 1047w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/83de5a7b5566dbe7195a98d7b25825cd/a59e9/2023-11-09-11-21-59.webp 192w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/0ca9f/2023-11-09-11-21-59.webp 384w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/dc9b9/2023-11-09-11-21-59.webp 768w,\n/static/83de5a7b5566dbe7195a98d7b25825cd/74e18/2023-11-09-11-21-59.webp 1047w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/83de5a7b5566dbe7195a98d7b25825cd/dc9b9/2023-11-09-11-21-59.webp\"\n            alt=\"명령어 파이프라인 사용 X\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>명령어 파이프라인을 사용하면 아래와 같이 빠르게 실행할 수 있게 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 533px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75099e724e34fedb25b3d667019b2492/aaa87/2023-11-09-11-23-14.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRlYAAABXRUJQVlA4IEoAAACQAwCdASoUAAsAPtFUo0uoJKMhsAgBABoJaQAAUvnW66uofVYgAP7zwnoASrXTxXAz72WGnkRy1oX2EgsxsSGmNyYr3z/MRwAAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/75099e724e34fedb25b3d667019b2492/a59e9/2023-11-09-11-23-14.webp 192w,\n/static/75099e724e34fedb25b3d667019b2492/0ca9f/2023-11-09-11-23-14.webp 384w,\n/static/75099e724e34fedb25b3d667019b2492/aaa87/2023-11-09-11-23-14.webp 533w\"\n              sizes=\"(max-width: 533px) 100vw, 533px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/75099e724e34fedb25b3d667019b2492/a59e9/2023-11-09-11-23-14.webp 192w,\n/static/75099e724e34fedb25b3d667019b2492/0ca9f/2023-11-09-11-23-14.webp 384w,\n/static/75099e724e34fedb25b3d667019b2492/aaa87/2023-11-09-11-23-14.webp 533w\"\n            sizes=\"(max-width: 533px) 100vw, 533px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/75099e724e34fedb25b3d667019b2492/aaa87/2023-11-09-11-23-14.webp\"\n            alt=\"명령어 파이프라인 사용 O\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><mark>비순차적 명령어 처리</mark>는 명령어 파이프라인에서 사용되는 명령어 병렬처리 기법입니다.\n먼저 예시를 보며 이해를 돕겠습니다.</p>\n<p>예를들어 아래와 같은 명령어들로 이루어진 소스 코드가 있다고 해봅시다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/865351e85f66fddb40042cac744a4461/8f82d/2023-11-09-11-28-08.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.541666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRlIAAABXRUJQVlA4IEYAAACwAwCdASoUAAgAPtFWo0uoJKMhsAgBABoJZwAAXKPYyDgi9oz0wAD+85PnYt5HdKyUuWBFpn6KVS1PoQzJCJbjOb5HAAAA'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/865351e85f66fddb40042cac744a4461/a59e9/2023-11-09-11-28-08.webp 192w,\n/static/865351e85f66fddb40042cac744a4461/0ca9f/2023-11-09-11-28-08.webp 384w,\n/static/865351e85f66fddb40042cac744a4461/dc9b9/2023-11-09-11-28-08.webp 768w,\n/static/865351e85f66fddb40042cac744a4461/8f82d/2023-11-09-11-28-08.webp 923w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/865351e85f66fddb40042cac744a4461/a59e9/2023-11-09-11-28-08.webp 192w,\n/static/865351e85f66fddb40042cac744a4461/0ca9f/2023-11-09-11-28-08.webp 384w,\n/static/865351e85f66fddb40042cac744a4461/dc9b9/2023-11-09-11-28-08.webp 768w,\n/static/865351e85f66fddb40042cac744a4461/8f82d/2023-11-09-11-28-08.webp 923w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/865351e85f66fddb40042cac744a4461/dc9b9/2023-11-09-11-28-08.webp\"\n            alt=\"비순차적 명령어 처리 X\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>위는 명령어 처리할 때 3번의 명령어가 1번, 2번 명령어에 의존하고 있기 때문에 3번 명령어를 처리하기 위해 나머지 4, 5, 6 명령어들이 기다리고 있게 됩니다.</p>\n<p>그래서 CPU는 효율적으로 처리하기 위해 아래와 같이 명령어의 순서를 바꿉니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e84056b627cac9bae14408442a69971b/9aca0/2023-11-09-11-30-57.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.708333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRlQAAABXRUJQVlA4IEgAAAAwAwCdASoUAAkAPtFUo0uoJKMhsAgBABoJaQAAetHPPgAAAP7xCEJGEmPos35XqH2l6yB6O+esNP/sbQQQXu3/KNUYIqW4AAA='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e84056b627cac9bae14408442a69971b/a59e9/2023-11-09-11-30-57.webp 192w,\n/static/e84056b627cac9bae14408442a69971b/0ca9f/2023-11-09-11-30-57.webp 384w,\n/static/e84056b627cac9bae14408442a69971b/dc9b9/2023-11-09-11-30-57.webp 768w,\n/static/e84056b627cac9bae14408442a69971b/9aca0/2023-11-09-11-30-57.webp 777w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e84056b627cac9bae14408442a69971b/a59e9/2023-11-09-11-30-57.webp 192w,\n/static/e84056b627cac9bae14408442a69971b/0ca9f/2023-11-09-11-30-57.webp 384w,\n/static/e84056b627cac9bae14408442a69971b/dc9b9/2023-11-09-11-30-57.webp 768w,\n/static/e84056b627cac9bae14408442a69971b/9aca0/2023-11-09-11-30-57.webp 777w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e84056b627cac9bae14408442a69971b/dc9b9/2023-11-09-11-30-57.webp\"\n            alt=\"비순차적 명령어 처리\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이렇게 되면 4, 5, 6 명령어는 기다리지 않고, 바로 실행할 수 있게 됩니다.</p>\n<p>아무 명령어나 순서를 바꾸지는 않고, 코드의 의존성으로 문제가 되지 않을 때만 변경합니다.</p>\n<h2 id=\"data-race가-발생하는-상황\" style=\"position:relative;\"><a href=\"#data-race%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%83%81%ED%99%A9\" aria-label=\"data race가 발생하는 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Race가 발생하는 상황</h2>\n<p>먼저 코드 예시를 보면서 Data Race가 발생하는 상황을 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SharedClass</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 공유 자원</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 공유 자원</span>\n\n        <span class=\"token comment\">// Thread1</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Thread2</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkForDataRace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">></span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y > x - 데이터 레이스가 감지됨!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>클래스 멤버 변수는 공유 자원으로 여기서 x, y는 공유 자원이 됩니다. 그리고 increment 메서드와 checkForDataRace 메서드는 각각의 스레드로 병렬적으로 실행하게 만들겁니다.</p>\n<p>여기서 이제 메서드들을 한 번 살펴보면 여러 경우로 결과가 나눠지는 경우가 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6ff144659b829f710d40035f0f7324e2/0b34d/2023-11-09-13-41-49.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAgCdASoUAAsAPtFUo0uoJKMhsAgBABoJaQAAeyAA/vKRyNYNXhby/58QAA=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6ff144659b829f710d40035f0f7324e2/a59e9/2023-11-09-13-41-49.webp 192w,\n/static/6ff144659b829f710d40035f0f7324e2/0ca9f/2023-11-09-13-41-49.webp 384w,\n/static/6ff144659b829f710d40035f0f7324e2/dc9b9/2023-11-09-13-41-49.webp 768w,\n/static/6ff144659b829f710d40035f0f7324e2/e2c2f/2023-11-09-13-41-49.webp 1152w,\n/static/6ff144659b829f710d40035f0f7324e2/f3efb/2023-11-09-13-41-49.webp 1536w,\n/static/6ff144659b829f710d40035f0f7324e2/0b34d/2023-11-09-13-41-49.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6ff144659b829f710d40035f0f7324e2/a59e9/2023-11-09-13-41-49.webp 192w,\n/static/6ff144659b829f710d40035f0f7324e2/0ca9f/2023-11-09-13-41-49.webp 384w,\n/static/6ff144659b829f710d40035f0f7324e2/dc9b9/2023-11-09-13-41-49.webp 768w,\n/static/6ff144659b829f710d40035f0f7324e2/e2c2f/2023-11-09-13-41-49.webp 1152w,\n/static/6ff144659b829f710d40035f0f7324e2/f3efb/2023-11-09-13-41-49.webp 1536w,\n/static/6ff144659b829f710d40035f0f7324e2/0b34d/2023-11-09-13-41-49.webp 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6ff144659b829f710d40035f0f7324e2/dc9b9/2023-11-09-13-41-49.webp\"\n            alt=\"case1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>순차적으로 실행되면 당연히 <code class=\"language-text\">Y > X</code>보다 큰 경우는 없고, <code class=\"language-text\">X == Y</code>라는 결과만 갖게 됩니다.</p>\n<hr>\n<p>다른 경우가 또 있습니다. 예를 들어, increment를 실행하는 도중에 checkForDataRace 메서드의 조건문이 실행되는 것이죠. 멀티스레딩 환경이기 때문에 병렬적으로 실행이 이루어져 이런 상황도 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d855766df6cc80a6aebaf50187ff22a5/0b34d/2023-11-09-13-49-53.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAgCdASoUAAsAPtFUo0uoJKMhsAgBABoJaQAAeyAA/vKRyNYNXhby/58QAA=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d855766df6cc80a6aebaf50187ff22a5/a59e9/2023-11-09-13-49-53.webp 192w,\n/static/d855766df6cc80a6aebaf50187ff22a5/0ca9f/2023-11-09-13-49-53.webp 384w,\n/static/d855766df6cc80a6aebaf50187ff22a5/dc9b9/2023-11-09-13-49-53.webp 768w,\n/static/d855766df6cc80a6aebaf50187ff22a5/e2c2f/2023-11-09-13-49-53.webp 1152w,\n/static/d855766df6cc80a6aebaf50187ff22a5/f3efb/2023-11-09-13-49-53.webp 1536w,\n/static/d855766df6cc80a6aebaf50187ff22a5/0b34d/2023-11-09-13-49-53.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d855766df6cc80a6aebaf50187ff22a5/a59e9/2023-11-09-13-49-53.webp 192w,\n/static/d855766df6cc80a6aebaf50187ff22a5/0ca9f/2023-11-09-13-49-53.webp 384w,\n/static/d855766df6cc80a6aebaf50187ff22a5/dc9b9/2023-11-09-13-49-53.webp 768w,\n/static/d855766df6cc80a6aebaf50187ff22a5/e2c2f/2023-11-09-13-49-53.webp 1152w,\n/static/d855766df6cc80a6aebaf50187ff22a5/f3efb/2023-11-09-13-49-53.webp 1536w,\n/static/d855766df6cc80a6aebaf50187ff22a5/0b34d/2023-11-09-13-49-53.webp 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d855766df6cc80a6aebaf50187ff22a5/dc9b9/2023-11-09-13-49-53.webp\"\n            alt=\"case2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이 경우에는 X만 1증가한 상태라서 <code class=\"language-text\">Y &lt; X</code>가 된 상태인거죠.<br>\n그래서 checkForDataRace 메서드의 <code class=\"language-text\">Y > X</code>는 만족하지 않습니다.</p>\n<p>그러면 어떠한 경우에도 <code class=\"language-text\">Y > X</code>는 만족하지 않아서 절대 <code class=\"language-text\">System.out.println(\"y > x - 데이터 레이스가 감지됨!!\");</code>는 실행되어야 하지 않습니다.</p>\n<p>그러면 한 번 실행을 시켜보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DataRaceProblem</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">SharedClass</span> sharedClass <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SharedClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Thread</span> thread1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_VALUE</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                sharedClass<span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// increment Thread</span>\n\n        <span class=\"token class-name\">Thread</span> thread2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_VALUE</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                sharedClass<span class=\"token punctuation\">.</span><span class=\"token function\">checkForDataRace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// checkForDataRace Thread</span>\n\n        thread1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        thread2<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SharedClass</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkForDataRace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">></span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y > x - 데이터 레이스가 감지됨!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">y <span class=\"token operator\">></span> x <span class=\"token operator\">-</span> 데이터 레이스가 감지됨<span class=\"token operator\">!</span><span class=\"token operator\">!</span>\ny <span class=\"token operator\">></span> x <span class=\"token operator\">-</span> 데이터 레이스가 감지됨<span class=\"token operator\">!</span><span class=\"token operator\">!</span></code></pre></div>\n<p>실행할 때마다 결과는 달라지긴 하지만 결과를 보면 <code class=\"language-text\">Y > X</code>를 만족하는 경우가 있다는 것입니다.</p>\n<p>어떻게 이런 결과가 나올 수 있을까요?<br>\n그 이유는 바로 <mark>비순차적 명령어 처리</mark>때문입니다.<br>\nincrement메서드의 내용을 한 번 다시 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>increment메서드의 안에 x++, y++은 서로 의존적이지 않습니다. 그래서 컴파일러 최적화 과정에서 비순차적 명령어 처리가 충분히 일어날 수 있는 부분입니다. <mark>그래서 x++, y++ 순서대로 처리가 되는 것이 아닌 비순차적 처리 때문에 y++, x++로 처리가 되는 것이죠.</mark>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/636c7ecc4307ae004dc505430212dd31/0b34d/2023-11-09-14-15-02.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRjgAAABXRUJQVlA4ICwAAACwAgCdASoUAAsAPtFUo0uoJKMhsAgBABoJaQAAeyAA/vKRyNIZOKgxNAAAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/636c7ecc4307ae004dc505430212dd31/a59e9/2023-11-09-14-15-02.webp 192w,\n/static/636c7ecc4307ae004dc505430212dd31/0ca9f/2023-11-09-14-15-02.webp 384w,\n/static/636c7ecc4307ae004dc505430212dd31/dc9b9/2023-11-09-14-15-02.webp 768w,\n/static/636c7ecc4307ae004dc505430212dd31/e2c2f/2023-11-09-14-15-02.webp 1152w,\n/static/636c7ecc4307ae004dc505430212dd31/f3efb/2023-11-09-14-15-02.webp 1536w,\n/static/636c7ecc4307ae004dc505430212dd31/0b34d/2023-11-09-14-15-02.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/636c7ecc4307ae004dc505430212dd31/a59e9/2023-11-09-14-15-02.webp 192w,\n/static/636c7ecc4307ae004dc505430212dd31/0ca9f/2023-11-09-14-15-02.webp 384w,\n/static/636c7ecc4307ae004dc505430212dd31/dc9b9/2023-11-09-14-15-02.webp 768w,\n/static/636c7ecc4307ae004dc505430212dd31/e2c2f/2023-11-09-14-15-02.webp 1152w,\n/static/636c7ecc4307ae004dc505430212dd31/f3efb/2023-11-09-14-15-02.webp 1536w,\n/static/636c7ecc4307ae004dc505430212dd31/0b34d/2023-11-09-14-15-02.webp 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/636c7ecc4307ae004dc505430212dd31/dc9b9/2023-11-09-14-15-02.webp\"\n            alt=\"case 3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"data-race-해결-방법\" style=\"position:relative;\"><a href=\"#data-race-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\"data race 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Data Race 해결 방법</h2>\n<p>Data Race의 해결 방법에는 두 가지가 있습니다.</p>\n<ol>\n<li><mark>메서드에 Synchroized 키워드 사용하기</mark>\n<ul>\n<li>한 번에 하나의 스레드만이 블록 또는 메서드에 진입할 수 있도록 보장합니다.</li>\n<li>임계 영역에 진입하는 스레드는 다른 스레드가 해당 블록 또는 메서드에 접근하지 못하게 합니다.</li>\n<li>락을 사용하여 동기화를 구현하므로 상대적으로 무겁고 오버헤드가 큽니다.</li>\n<li>코드 블록이나 메서드 내에서 사용되며, 메서드에 적용할 경우 전체 메서드가 동기화됩니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token keyword\">public</span> <span class=\"token keyword\">synchronized</span> <span class=\"token keyword\">void</span> <span class=\"token function\">synchronizedMethod</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// 동기화된 메서드 내용</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</li>\n<li><mark>변수에 Volatile 키워드 사용하기</mark>\n<ul>\n<li>변수를 메모리에서 읽거나 쓸 때 항상 메인 메모리를 참조하도록 보장합니다.</li>\n<li>캐시된 값 사용을 방지하여 변수의 일관성을 제공합니다.</li>\n<li>volatile 키워드를 사용한 변수는 원자적으로 읽기 및 쓰기 연산이 수행됩니다.</li>\n<li>단순한 변수의 상태를 보장하며, 복합 연산에 대해서는 synchronized가 더 적합합니다.</li>\n<li>비순차적 명령어 처리하는 경우,</li>\n</ul>\nvolatile 변수에 대한 쓰기 명령 이전의 명령들은 reordering 이후에도 volatile 변수에 대한 쓰기 명령 이전에 실행되도록 유지됩니다.<br>\nvolatile 변수에 대한 읽기 명령 이후의 명령들은 reordeing 이후에도 volatile 변수에 대한 읽기 명령 이후에 실행되도록 유지합니다.<br>\n-> 즉, 비순차적 명령어 처리가 발생하지 않는 것을 의미합니다.</li>\n</ol>\n<div class=\"code-header\">\n   <span class=\"red btn\"></span>\n   <span class=\"yellow btn\"></span>\n   <span class=\"green btn\"></span>\n</div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">volatile</span> <span class=\"token keyword\">int</span> sharedVal<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">method</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// volatile 명령어 이전에 있는 명령어들은 volatile 명령어 접근 전에 실행되도록 보장</span>\n  read<span class=\"token operator\">/</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>sharedVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// volatile 명령어 이후에 있는 명령어들은 volatile 명령어 접근 후에 실행되도록 보장</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<hr>\n<p>여기서는 두 개의 스레드로 한 메서드를 실행하는 Race Condition이 아니므로 두 메서드에 Synchronize 키워드로 동시 실행을 막지 않아도 됩니다. 그래서 Lock를 덜 잡는 Volatile를 사용해서 Data Race를 해결해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SharedClass</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">int</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 변경된 부분</span>\n      <span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">int</span> y <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 변경된 부분</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n          y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">checkForDataRace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">></span> x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y > x - 데이터 레이스가 감지됨!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 하면 <code class=\"language-text\">y > x</code>조건을 만족하지 못해<code class=\"language-text\">System.out.println(\"y > x - 데이터 레이스가 감지됨!!\");</code>을 실행하지 않습니다.</p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>정리하자면, Data Race가 발생하는 이유는 CPU를 효율적으로 활용하기 위해 사용하고 있는 비순차적 명령어 처리가 이유입니다.\n이러한 Data Race를 해결하기 위해서는 Synchronized, Volatile을 적용할 수 있습니다.</p>\n<p>참고한 사이트<br>\nVolatile : <a href=\"https://ttl-blog.tistory.com/238\" target=\"_blank\" rel=\"nofollow\">말랑님 블로그</a><br>\nData Race : <a href=\"https://www.udemy.com/course/java-multi-threading/\" target=\"_blank\" rel=\"nofollow\">Udemy 강의</a></p>","tableOfContents":"<ul>\n<li><a href=\"#%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%94%A9-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EA%B3%B5%EC%9C%A0%EC%9E%90%EC%9B%90\">멀티스레딩 환경에서의 공유자원</a></li>\n<li><a href=\"#%EB%B9%84%EC%88%9C%EC%B0%A8%EC%A0%81-%EB%AA%85%EB%A0%B9%EC%96%B4-%EC%B2%98%EB%A6%AC\">비순차적 명령어 처리</a></li>\n<li><a href=\"#data-race%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EC%83%81%ED%99%A9\">Data Race가 발생하는 상황</a></li>\n<li><a href=\"#data-race-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">Data Race 해결 방법</a></li>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>","frontmatter":{"title":"Java 멀티 스레딩 환경에서 Data Race","summary":"아니 이런게 있었다니.. Data Race","date":"2023.11.09.","categories":["Java","MultiThreading","Data Race"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRvwAAABXRUJQVlA4IPAAAACwBQCdASoUABQAAAAAJaQDLs2AOAA6RjyVZ4AcyT+M2igZIByhf9q/KHjK/0zOzXrCCarYswAA/v//vi4vw/8C9ZQ7H+H//yCwbQPvsZtVP/0ES//obRwOWqfhB6QluKlBWVv/00//+CZuyt2HnR8rj3PH4g+AF7BjHL/DERmaNf+iMa2Vn/8w5vZ6J8f/zWL84nce2QIW+sKRZGr/3/++a+72/AQG7P0f+Vx+2n8ZbXOmM113LcubNJdYTmvhHp8ioh/Ssay6McI8Hv4WzVhoxfjdbd0Vnn7uGhnuuiz+QfZ5Lvn/yafX9rRFNCCAAAA="},"images":{"fallback":{"src":"/static/97afc7f825b0ddb0803e2cd1be787df7/9c0a1/chocoball.webp","srcSet":"/static/97afc7f825b0ddb0803e2cd1be787df7/e64f1/chocoball.webp 100w,\n/static/97afc7f825b0ddb0803e2cd1be787df7/8b00d/chocoball.webp 200w,\n/static/97afc7f825b0ddb0803e2cd1be787df7/9c0a1/chocoball.webp 400w","sizes":"(min-width: 400px) 400px, 100vw"},"sources":[]},"width":400,"height":400}},"publicURL":"/static/97afc7f825b0ddb0803e2cd1be787df7/chocoball.webp"}}}}]}},"pageContext":{"slug":"/java/datarace/"}},"staticQueryHashes":["2269898903"],"slicesMap":{}}