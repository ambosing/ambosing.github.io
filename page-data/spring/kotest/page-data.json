{"componentChunkName":"component---src-templates-post-template-tsx","path":"/spring/kotest/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>저번에는 테스트를 하는 이유와 좋은 테스트를 하기 위한 조건, 맛보기로 JUnit을 알아보았는데요.<br>\n그래도 역시 제가 생각하기엔 코틀린을 사용하시는 분들이라면 kotest를 사용할 것 같습니다.<br>\n그래서 이번엔 kotest에 대해서 알아보겠습니다.</p>\n<h2 id=\"tdd-bdd\" style=\"position:relative;\"><a href=\"#tdd-bdd\" aria-label=\"tdd bdd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TDD, BDD</h2>\n<p>kotest를 알아보기 앞서 TDD와 BDD의 차이를 알아보겠습니다.<br>\n이 차이를 알아보는 것이 앞으로 테스트를 작성하는데 도움이 될 것이기 때문입니다!</p>\n<p>아래는 TDD와 BDD의 주요 차이를 마크다운 표로 정리한 것입니다 : )</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>TDD (Test-Driven Development)</th>\n<th>BDD (Behavior-Driven Development)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>목적</td>\n<td>코드 품질 향상</td>\n<td>소프트웨어 동작 및 행위 강조</td>\n</tr>\n<tr>\n<td>중심</td>\n<td>개발자 중심</td>\n<td>동작 중심</td>\n</tr>\n<tr>\n<td>테스트</td>\n<td>단위 테스트</td>\n<td>기능/행위 테스트</td>\n</tr>\n<tr>\n<td>테스트 작성 방식</td>\n<td>코드 기반</td>\n<td>자연어 스타일</td>\n</tr>\n<tr>\n<td>테스트 프레임워크</td>\n<td>다양한 테스트 프레임워크 선택 가능</td>\n<td>다양한 BDD 프레임워크 선택 가능</td>\n</tr>\n<tr>\n<td>테스트 구조화</td>\n<td>테스트 스위트, 테스트 그룹 등으로 구조화</td>\n<td>시나리오, 스토리 등으로 구조화</td>\n</tr>\n<tr>\n<td>테스트 실행 시점</td>\n<td>개발 단계 초기에 작성 및 실행</td>\n<td>요구사항 및 동작 명세 이해 후 작성 및 실행</td>\n</tr>\n<tr>\n<td>대상</td>\n<td>코드의 동작 검증</td>\n<td>시스템의 행위 및 기능 검증</td>\n</tr>\n</tbody>\n</table>\n<p>TDD와 BDD는 접근 방식과 테스트 작성 방법 등에서 차이가 있지만, 상호 보완적인 요소도 많이 가지고 있습니다. 일부 개발자들은 TDD와 BDD를 함께 사용하여 개발하는 경우도 있습니다.</p>\n<p>TDD를 했을 때 장점도 분명하지만 아무래도 작성하기 힘들고, 귀찮다는 것이 현실입니다. 그래서 BDD를 사용하면 조금 더 쉽게 테스트를 작성할 수 있습니다.</p>\n<p>BDD로 테스트를 작성하는 것은 기획서를 읽어봤을 때 요구사항을 충족시키는 방향으로 작성하면 돼서 TDD보다 작성하기 수월합니다.</p>\n<p>그래서 실무에서는 이렇게 사용한다고 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bb8f6a79079496234c9f88d25d30f20a/92c1e/2023-06-02-13-36-06.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.895833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRpAAAABXRUJQVlA4IIQAAACwAwCdASoUAAwAPtFWpUwoJKOiMAgBABoJaQAAXAekzVip9wkAAAD+9ZXDjq8AlasikVYOg/2NmpuxroPf6lqi23S+Ey4dhvqKIX58MnqsHIlDeMbtiw/SqdAQxXx4D7HZmrxrcaas4vJ6tbuNTG9U8r3Fcn6o2ZYbHPVzIARk/eJeAAA='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/bb8f6a79079496234c9f88d25d30f20a/a59e9/2023-06-02-13-36-06.webp 192w,\n/static/bb8f6a79079496234c9f88d25d30f20a/0ca9f/2023-06-02-13-36-06.webp 384w,\n/static/bb8f6a79079496234c9f88d25d30f20a/dc9b9/2023-06-02-13-36-06.webp 768w,\n/static/bb8f6a79079496234c9f88d25d30f20a/e2c2f/2023-06-02-13-36-06.webp 1152w,\n/static/bb8f6a79079496234c9f88d25d30f20a/92c1e/2023-06-02-13-36-06.webp 1222w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/bb8f6a79079496234c9f88d25d30f20a/a59e9/2023-06-02-13-36-06.webp 192w,\n/static/bb8f6a79079496234c9f88d25d30f20a/0ca9f/2023-06-02-13-36-06.webp 384w,\n/static/bb8f6a79079496234c9f88d25d30f20a/dc9b9/2023-06-02-13-36-06.webp 768w,\n/static/bb8f6a79079496234c9f88d25d30f20a/e2c2f/2023-06-02-13-36-06.webp 1152w,\n/static/bb8f6a79079496234c9f88d25d30f20a/92c1e/2023-06-02-13-36-06.webp 1222w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/bb8f6a79079496234c9f88d25d30f20a/dc9b9/2023-06-02-13-36-06.webp\"\n            alt=\"BDD와 TDD의 경계\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>위의 그림과 같이 BDD와 TDD는 상호보완적으로 그려지는데요. 이는 BDD와 TDD를 함께 활용할 수 있음을 의미합니다.\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 569px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7e71ce66ae10baa0dc97f0510f78f42c/fa7e8/2023-06-02-13-38-46.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRnAAAABXRUJQVlA4IGQAAAAQBACdASoUAA8APtFUo0uoJKMhsAgBABoJQBXDhCqfGP4v02HbVbQ9gAD+9gfWh8VHvGDuL2DBQ8DKw5TDTip9coDsSAzGcjT5aUS3Ut7DxZyOJw5uBDDG0BoEAKEZ9OlJUAAA'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7e71ce66ae10baa0dc97f0510f78f42c/a59e9/2023-06-02-13-38-46.webp 192w,\n/static/7e71ce66ae10baa0dc97f0510f78f42c/0ca9f/2023-06-02-13-38-46.webp 384w,\n/static/7e71ce66ae10baa0dc97f0510f78f42c/fa7e8/2023-06-02-13-38-46.webp 569w\"\n              sizes=\"(max-width: 569px) 100vw, 569px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7e71ce66ae10baa0dc97f0510f78f42c/a59e9/2023-06-02-13-38-46.webp 192w,\n/static/7e71ce66ae10baa0dc97f0510f78f42c/0ca9f/2023-06-02-13-38-46.webp 384w,\n/static/7e71ce66ae10baa0dc97f0510f78f42c/fa7e8/2023-06-02-13-38-46.webp 569w\"\n            sizes=\"(max-width: 569px) 100vw, 569px\"\n            type=\"image/webp\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7e71ce66ae10baa0dc97f0510f78f42c/fa7e8/2023-06-02-13-38-46.webp\"\n            alt=\"테스트 피라미드\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>보통은 Integration 테스트에는 BDD를 사용하게 되고 TDD는 유닛테스트에서 사용한다고 합니다.</p>\n<h2 id=\"kotest\" style=\"position:relative;\"><a href=\"#kotest\" aria-label=\"kotest permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kotest</h2>\n<p>Kotest는 코틀린(Kotlin) 프로그래밍 언어로 작성된 테스트 프레임워크입니다. 테스트 프레임워크는 개발자가 소프트웨어의 품질을 검증하기 위해 작성하는 테스트 코드를 관리하고 실행하는 데 도움을 주는 도구입니다.</p>\n<p>Kotest는 코틀린의 강력한 기능을 활용하여 테스트 코드를 작성하고 실행하는 데 유연성과 간편함을 제공합니다. 다양한 기능을 제공하여 단위 테스트, 통합 테스트, 행위 주도 개발(Behavior-Driven Development, BDD) 스타일의 테스트 등을 지원합니다.</p>\n<p>Kotest는 다양한 확장 기능을 제공하여 테스트 환경을 커스터마이징하고 확장할 수 있습니다. 예를 들어, MockK를 사용하여 모의 객체(mock object)를 생성하고 테스트에 활용할 수 있습니다.</p>\n<p>Kotest는 개발자 커뮤니티와 지속적으로 발전하고 있으며, 코틀린 생태계에서 인기 있는 테스트 프레임워크 중 하나입니다.</p>\n<h3 id=\"간단한-tdd-예제-코드\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-tdd-%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C\" aria-label=\"간단한 tdd 예제 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단한 TDD 예제 코드</h3>\n<div class=\"code-header\">\r\n\t<span class=\"red btn\"></span>\r\n\t<span class=\"yellow btn\"></span>\r\n\t<span class=\"green btn\"></span>\r\n</div>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>StringSpec\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\r\n\r\n<span class=\"token keyword\">class</span> CalculatorTest <span class=\"token operator\">:</span> <span class=\"token function\">StringSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"더하기 테스트\"</span></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> calculator <span class=\"token operator\">=</span> <span class=\"token function\">Calculator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> calculator<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\r\n        result shouldBe <span class=\"token number\">5</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"빼기 테스트\"</span></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> calculator <span class=\"token operator\">=</span> <span class=\"token function\">Calculator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> calculator<span class=\"token punctuation\">.</span><span class=\"token function\">subtract</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\r\n        result shouldBe <span class=\"token number\">2</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">class</span> Calculator <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">subtract</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> a <span class=\"token operator\">-</span> b\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n</code></pre></div>\n<p>위의 코드에서는 <code class=\"language-text\">Calculator</code> 클래스의 <code class=\"language-text\">add</code>와 <code class=\"language-text\">subtract</code> 메서드를 테스트하는 예제입니다. <code class=\"language-text\">StringSpec</code>을 상속받은 테스트 스펙에서 테스트 케이스를 작성하고, <code class=\"language-text\">shouldBe</code> 함수를 사용하여 예상 결과와 실제 결과를 비교합니다.</p>\n<h3 id=\"간단한-bdd-예제-코드\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-bdd-%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C\" aria-label=\"간단한 bdd 예제 코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단한 BDD 예제 코드</h3>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>BehaviorSpec\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\r\n\r\n<span class=\"token keyword\">class</span> BankAccountTest <span class=\"token operator\">:</span> <span class=\"token function\">BehaviorSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token function\">given</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"잔고가 100인 계좌\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> bankAccount <span class=\"token operator\">=</span> <span class=\"token function\">BankAccount</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\r\n\r\n        <span class=\"token function\">`when`</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"100을 입금하면\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            bankAccount<span class=\"token punctuation\">.</span><span class=\"token function\">deposit</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\r\n\r\n            <span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"잔고는 200이어야 한다\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                bankAccount<span class=\"token punctuation\">.</span>balance shouldBe <span class=\"token number\">200</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">`when`</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"50을 출금하면\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            bankAccount<span class=\"token punctuation\">.</span><span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\r\n\r\n            <span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"잔고는 50이어야 한다\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                bankAccount<span class=\"token punctuation\">.</span>balance shouldBe <span class=\"token number\">50</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token function\">BankAccount</span><span class=\"token punctuation\">(</span>initialBalance<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">var</span> balance<span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span> initialBalance\r\n\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">deposit</span><span class=\"token punctuation\">(</span>amount<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        balance <span class=\"token operator\">+=</span> amount\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">withdraw</span><span class=\"token punctuation\">(</span>amount<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        balance <span class=\"token operator\">-=</span> amount\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위의 코드에서는 <code class=\"language-text\">BankAccount</code> 클래스를 BDD 스타일로 테스트하는 예제입니다. <code class=\"language-text\">BehaviorSpec</code>을 상속받은 테스트 스펙에서 <code class=\"language-text\">given</code>, <code class=\"language-text\">when</code>, <code class=\"language-text\">then</code>을 사용하여 테스트 시나리오를 구조화합니다. 각 시나리오에서 예상 결과와 실제 결과를 <code class=\"language-text\">shouldBe</code> 함수로 비교합니다.</p>\n<p>BDD는 Behavior Spec이나 Feature Spec으로 많이 작성합니다.</p>\n<h3 id=\"간단한-spring-web-test\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-spring-web-test\" aria-label=\"간단한 spring web test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단한 Spring Web Test</h3>\n<p>Kotest와 Mockk를 사용하여 Controller, Service, 그리고 Repository 레이어의 테스트 코드를 작성하는 예제입니다. 프레임워크는 Spring Boot를 사용했습니다</p>\n<p>아래와 같이 <code class=\"language-text\">UserController</code>, <code class=\"language-text\">UserService</code> 그리고 <code class=\"language-text\">UserRepository</code>의 간단한 코드가 있다고 가정하고 테스트 코드를 작성하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">val</span> id<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> <span class=\"token keyword\">val</span> name<span class=\"token operator\">:</span> String<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">interface</span> UserRepository <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> User<span class=\"token operator\">?</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token function\">UserService</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> userRepository<span class=\"token operator\">:</span> UserRepository<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> User<span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">return</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token annotation builtin\">@RestController</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token function\">UserController</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> <span class=\"token keyword\">val</span> userService<span class=\"token operator\">:</span> UserService<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation builtin\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/user/{id}\"</span></span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">fun</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token annotation builtin\">@PathVariable</span> id<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ResponseEntity<span class=\"token operator\">&lt;</span>User<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> user <span class=\"token operator\">=</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token operator\">?:</span> <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">notFound</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token keyword\">return</span> ResponseEntity<span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 각 레이어에 대한 테스트 코드를 작성해 봅시다.</p>\n<p><strong>UserControllerTest:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>mockk<span class=\"token punctuation\">.</span>every\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>mockk<span class=\"token punctuation\">.</span>mockk\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>HttpStatus\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>ResponseEntity\r\n\r\n<span class=\"token keyword\">class</span> UserControllerTest<span class=\"token operator\">:</span> <span class=\"token function\">StringSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">val</span> userService <span class=\"token operator\">=</span> mockk<span class=\"token operator\">&lt;</span>UserService<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">val</span> userController <span class=\"token operator\">=</span> <span class=\"token function\">UserController</span><span class=\"token punctuation\">(</span>userService<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"만약 유저가 존재한다면 getUser()메서드는 user객체를 반환합니다. \"</span></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> mockUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"John Doe\"</span></span><span class=\"token punctuation\">)</span>\r\n\r\n        every <span class=\"token punctuation\">{</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns mockUser\r\n\r\n        <span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> userController<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n\r\n        response<span class=\"token punctuation\">.</span>statusCode shouldBe HttpStatus<span class=\"token punctuation\">.</span>OK\r\n        response<span class=\"token punctuation\">.</span>body shouldBe mockUser\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"만약 유저가 존재하지 않다면 getUser() 메서드는 404 에러 메시지를 전달합니다.\"</span></span> <span class=\"token punctuation\">{</span>\r\n        every <span class=\"token punctuation\">{</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns <span class=\"token keyword\">null</span>\r\n\r\n        <span class=\"token keyword\">val</span> response <span class=\"token operator\">=</span> userController<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n\r\n        response<span class=\"token punctuation\">.</span>statusCode shouldBe HttpStatus<span class=\"token punctuation\">.</span>NOT_FOUND\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>UserServiceTest:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">class</span> UserServiceTest<span class=\"token operator\">:</span> <span class=\"token function\">StringSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">val</span> userRepository <span class=\"token operator\">=</span> mockk<span class=\"token operator\">&lt;</span>UserRepository<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">val</span> userService <span class=\"token operator\">=</span> <span class=\"token function\">UserService</span><span class=\"token punctuation\">(</span>userRepository<span class=\"token punctuation\">)</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"getUser() 메서드는 userId에 맞는 user를 반환해야 합니다.\"</span></span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> mockUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>id <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name <span class=\"token operator\">=</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"John Doe\"</span></span><span class=\"token punctuation\">)</span>\r\n\r\n        every <span class=\"token punctuation\">{</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns mockUser\r\n\r\n        userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> shouldBe mockUser\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token string-literal singleline\"><span class=\"token string\">\"getUser() 메서드는 존재하지 않는 유저에 대해서 null을 반환합니다.\"</span></span> <span class=\"token punctuation\">{</span>\r\n        every <span class=\"token punctuation\">{</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span> returns <span class=\"token keyword\">null</span>\r\n\r\n        userService<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> shouldBe <span class=\"token keyword\">null</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>UserRepositoryTest:</strong>\r\n이것은 보통 데이터베이스와 연결되는 객체이므로, 해당 데이터베이스에서 제공하는 테스트 도구나 라이브러리를 사용하는 것이 일반적입니다. Mocking은 이 경우에는 적합하지 않을 수 있습니다.</p>\n<p>추가로, 레포지토리 테스트는 데이터베이스의 연결 상태, 쿼리의 정확성 등에 대한 테스트를 주로 담당하므로 mocking이 아닌 실제 데이터베이스 환경에서의 테스트가 필요할 수 있습니다.</p>\n<h3 id=\"실제-db-연결하는-repository-test\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C-db-%EC%97%B0%EA%B2%B0%ED%95%98%EB%8A%94-repository-test\" aria-label=\"실제 db 연결하는 repository test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제 DB 연결하는 Repository Test</h3>\n<p>아래는 Spring Boot와 Kotest를 사용하여 <code class=\"language-text\">UserRepository</code>의 테스트를 작성하는 예시입니다!\r\n이번에는 StringSpec이 아닌 FunSpec으로 작성해보겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>FunSpec\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>Autowired\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span>orm<span class=\"token punctuation\">.</span>jpa<span class=\"token punctuation\">.</span>DataJpaTest\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>SpringBootTest\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>ContextConfiguration\r\n\r\n<span class=\"token annotation builtin\">@DataJpaTest</span>\r\n<span class=\"token annotation builtin\">@ContextConfiguration</span><span class=\"token punctuation\">(</span>classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>Application<span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token function\">UserRepositoryTest</span><span class=\"token punctuation\">(</span><span class=\"token annotation builtin\">@Autowired</span> <span class=\"token keyword\">val</span> userRepository<span class=\"token operator\">:</span> UserRepository<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token function\">FunSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"getUser() 메서드는 userId에 맞는 user를 반환해야 합니다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"John Doe\"</span></span><span class=\"token punctuation\">)</span> \r\n\r\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// DB에도 User(1, \"John Doe\")객체가 있다고 가정합니다.</span>\r\n        result shouldBe user\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"getUser() 메서드는 존재하지 않는 유저에 대해서 null을 반환합니다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> userRepository<span class=\"token punctuation\">.</span><span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\r\n        result shouldBe <span class=\"token keyword\">null</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 예제에서는 Kotest의 <code class=\"language-text\">FunSpec</code>을 사용하여 테스트를 작성했습니다. <code class=\"language-text\">FunSpec</code>은 각 테스트를 <code class=\"language-text\">test</code> 함수 내부에 작성하며, 이는 각 테스트를 독립적으로 정의할 수 있게 해줍니다.</p>\n<p>또한, Kotest의 matchers 중 하나인 <code class=\"language-text\">shouldBe</code>를 사용하여 테스트 결과를 검증합니다. 이 matcher는 첫 번째 인자가 두 번째 인자와 같아야 함을 의미합니다.</p>\n<p>마지막으로, <code class=\"language-text\">@DataJpaTest</code>와 <code class=\"language-text\">@ContextConfiguration</code> 애노테이션을 사용하여 JPA 관련 설정을 로드하고 <code class=\"language-text\">UserRepository</code> 인터페이스를 통해 데이터베이스와의 상호작용을 테스트합니다.</p>\n<h3 id=\"간단한-통합-bdd-통합-테스트\" style=\"position:relative;\"><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-%ED%86%B5%ED%95%A9-bdd-%ED%86%B5%ED%95%A9-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"간단한 통합 bdd 통합 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>간단한 통합 BDD 통합 테스트</h3>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>spec<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>BehaviorSpec\r\n<span class=\"token keyword\">import</span> io<span class=\"token punctuation\">.</span>kotest<span class=\"token punctuation\">.</span>matchers<span class=\"token punctuation\">.</span>shouldBe\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>Autowired\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span>orm<span class=\"token punctuation\">.</span>jpa<span class=\"token punctuation\">.</span>DataJpaTest\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>AutoConfigureMockMvc\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>SpringBootTest\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>HttpStatus\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>MockMvc\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>MockMvcRequestBuilders<span class=\"token punctuation\">.</span>get\r\n<span class=\"token keyword\">import</span> org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span>MockMvcResultMatchers<span class=\"token punctuation\">.</span>status\r\n\r\n<span class=\"token annotation builtin\">@SpringBootTest</span>\r\n<span class=\"token annotation builtin\">@AutoConfigureMockMvc</span>\r\n<span class=\"token keyword\">class</span> <span class=\"token function\">UserControllerIntegrationTest</span><span class=\"token punctuation\">(</span><span class=\"token annotation builtin\">@Autowired</span> <span class=\"token keyword\">val</span> mockMvc<span class=\"token operator\">:</span> MockMvc<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">BehaviorSpec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token function\">Given</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"UserController's `/user/{id}` endpoint\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token function\">When</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"유저가 존재할 때\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">val</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string-literal singleline\"><span class=\"token string\">\"John Doe\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// DB에 있다고 가정합니다!</span>\r\n\r\n            <span class=\"token function\">Then</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"UserId에 해당하는 유저를 반환합니다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/user/1\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>isOk<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">andReturn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n                <span class=\"token keyword\">val</span> responseBody <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>contentAsString\r\n                responseBody shouldBe <span class=\"token string-literal singleline\"><span class=\"token string\">\"{\\\"id\\\":1,\\\"name\\\":\\\"John Doe\\\"}\"</span></span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n\r\n        <span class=\"token function\">When</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"유저가 존재하지 않을때\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token function\">Then</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"404 상태코드를 보냅니다.\"</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n                <span class=\"token keyword\">val</span> result <span class=\"token operator\">=</span> mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"/user/2\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>isNotFound<span class=\"token punctuation\">)</span>\r\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">andReturn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n\r\n                result<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>status shouldBe HttpStatus<span class=\"token punctuation\">.</span>NOT_FOUND<span class=\"token punctuation\">.</span><span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n            <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이 예제에서는 Spring Boot의 <code class=\"language-text\">MockMvc</code>를 사용하여 HTTP 요청을 가상으로 수행하고 응답을 검증합니다. 이를 이용하여 <code class=\"language-text\">UserController</code>의 <code class=\"language-text\">/user/{id}</code> 엔드포인트에 GET 요청을 보내고, 사용자가 존재하는 경우와 존재하지 않는 경우에 대해 적절한 응답이 반환되는지 확인합니다.</p>\n<p>BDD 스타일의 테스트에서는 <code class=\"language-text\">Given</code>, <code class=\"language-text\">When</code>, <code class=\"language-text\">Then</code>을 이용하여 테스트의 전제조건, 실행할 액션, 그리고 예상 결과를 명시하게 됩니다. 이는 테스트 코드를 읽는 사람이 테스트의 목적과 내용을 이해하는데 도움을 줍니다.</p>\n<p>마지막으로, 이 테스트는 실제 데이터베이스에 의존하며 서버를 실행하지 않고 MVC 레이어만을 테스트하기 때문에 통합 테스트에 가깝습니다. 통합 테스트에서는 개별적인 유닛 테스트보다는 더 넓은 범위의 코드를 테스트하게 됩니다.</p>\n<h2 id=\"끝으로\" style=\"position:relative;\"><a href=\"#%EB%81%9D%EC%9C%BC%EB%A1%9C\" aria-label=\"끝으로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>끝으로</h2>\n<p>저의 글을 통해서 kotest에 대해서 조금이라도 알게되셨다면 좋겠습니다.<br>\n아직은 미숙하지만 앞으로도 좋은 글을 통해서 찾아볼 수 있었으면 좋겠습니다!</p>\n<h3 id=\"참고하며-도움을-받은-글\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%98%EB%A9%B0-%EB%8F%84%EC%9B%80%EC%9D%84-%EB%B0%9B%EC%9D%80-%EA%B8%80\" aria-label=\"참고하며 도움을 받은 글 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고하며 도움을 받은 글</h3>\n<p><a href=\"https://veluxer62.github.io/tutorials/getting-started-with-kotest/\" target=\"_blank\" rel=\"nofollow\">남경호님의 kotest 글</a><br>\n<a href=\"https://kotest.io/docs/assertions/assertions.html\" target=\"_blank\" rel=\"nofollow\">Kotest docs:Assertions</a><br>\n<a href=\"https://tv.kakao.com/channel/3693125/cliplink/414004682\" target=\"_blank\" rel=\"nofollow\">ifkakao-2020: kotest가 있다면 TDD 묻고 BDD로 가!</a></p>\n<p>저도 공부하면서 적은것이라 행여나 잘못된 것이 있으면 알려주세요!<br>\n잘못된 지식을 전파하고 싶지 않습니다!</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#tdd-bdd\">TDD, BDD</a></p>\n</li>\n<li>\n<p><a href=\"#kotest\">Kotest</a></p>\n<ul>\n<li><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-tdd-%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C\">간단한 TDD 예제 코드</a></li>\n<li><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-bdd-%EC%98%88%EC%A0%9C-%EC%BD%94%EB%93%9C\">간단한 BDD 예제 코드</a></li>\n<li><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-spring-web-test\">간단한 Spring Web Test</a></li>\n<li><a href=\"#%EC%8B%A4%EC%A0%9C-db-%EC%97%B0%EA%B2%B0%ED%95%98%EB%8A%94-repository-test\">실제 DB 연결하는 Repository Test</a></li>\n<li><a href=\"#%EA%B0%84%EB%8B%A8%ED%95%9C-%ED%86%B5%ED%95%A9-bdd-%ED%86%B5%ED%95%A9-%ED%85%8C%EC%8A%A4%ED%8A%B8\">간단한 통합 BDD 통합 테스트</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%81%9D%EC%9C%BC%EB%A1%9C\">끝으로</a></p>\n<ul>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%98%EB%A9%B0-%EB%8F%84%EC%9B%80%EC%9D%84-%EB%B0%9B%EC%9D%80-%EA%B8%80\">참고하며 도움을 받은 글</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"스프링부트 kotest, mockk","summary":"스프링부트 테스트 정복해보자구","date":"2023.06.02.","categories":["Spring"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRvwAAABXRUJQVlA4IPAAAACwBQCdASoUABQAAAAAJaQDLs2AOAA6RjyVZ4AcyT+M2igZIByhf9q/KHjK/0zOzXrCCarYswAA/v//vi4vw/8C9ZQ7H+H//yCwbQPvsZtVP/0ES//obRwOWqfhB6QluKlBWVv/00//+CZuyt2HnR8rj3PH4g+AF7BjHL/DERmaNf+iMa2Vn/8w5vZ6J8f/zWL84nce2QIW+sKRZGr/3/++a+72/AQG7P0f+Vx+2n8ZbXOmM113LcubNJdYTmvhHp8ioh/Ssay6McI8Hv4WzVhoxfjdbd0Vnn7uGhnuuiz+QfZ5Lvn/yafX9rRFNCCAAAA="},"images":{"fallback":{"src":"/static/97afc7f825b0ddb0803e2cd1be787df7/9c0a1/chocoball.webp","srcSet":"/static/97afc7f825b0ddb0803e2cd1be787df7/e64f1/chocoball.webp 100w,\n/static/97afc7f825b0ddb0803e2cd1be787df7/8b00d/chocoball.webp 200w,\n/static/97afc7f825b0ddb0803e2cd1be787df7/9c0a1/chocoball.webp 400w","sizes":"(min-width: 400px) 400px, 100vw"},"sources":[]},"width":400,"height":400}},"publicURL":"/static/97afc7f825b0ddb0803e2cd1be787df7/chocoball.webp"}}}}]}},"pageContext":{"slug":"/spring/kotest/"}},"staticQueryHashes":["2269898903"],"slicesMap":{}}